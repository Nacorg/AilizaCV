<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AilizaCV - An√°lisis Inteligente de CVs</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìÑ</text></svg>">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { overflow-x: hidden; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-30px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes pulse-slow { 0%, 100% { opacity: 0.5; } 50% { opacity: 0.8; } }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .animate-fade-in { animation: fadeIn 0.8s ease-out; }
        .animate-slide-in { animation: slideIn 0.5s ease-out; }
        .animate-pulse-slow { animation: pulse-slow 3s ease-in-out infinite; }
        .animate-spin { animation: spin 1s linear infinite; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #4c1d95; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #6d28d9; }
        .icon-circle { display: inline-flex; align-items: center; justify-content: center; width: 3rem; height: 3rem; border-radius: 50%; }
    </style>
</head>
<body class="bg-slate-900 text-white font-sans">
    <div id="app"></div>

    <script>
        const nacorData = {
            name: "Nacor Garc√≠a",
            role: "Desarrollador Full Stack & T√©cnico Superior DAM",
            location: "Madrid, Espa√±a",
            email: "nacorgarciadediego@gmail.com",
            phone: "+34 601 133 991",
            linkedin: "linkedin.com/in/nacor-garc√≠a",
            github: "github.com/NacorGarcia",
            tagline: "Apasionado por la tecnolog√≠a y el aprendizaje continuo con experiencia en desarrollo multiplataforma y frameworks modernos",
            
            education: [
                { degree: "Grado Superior en Desarrollo de Aplicaciones Multiplataforma (DAM)", institution: "Instituto Nebrija de Formaci√≥n Profesional", period: "2024 - 2026", status: "En curso" },
                { degree: "Bachillerato de Ciencias Sociales", institution: "Matr√≠cula de Honor", period: "2022 - 2024", status: "Completado" }
            ],
            
            skills: {
                backend: { name: "Backend & Frameworks", level: 85, techs: ["Java", "Spring Boot", "Python", "Kotlin"], color: "from-red-500 to-orange-500" },
                frontend: { name: "Frontend & UI", level: 88, techs: ["Angular 20", "TypeScript", "Svelte", "React", "HTML/CSS/JS"], color: "from-blue-500 to-cyan-500" },
                mobile: { name: "Desarrollo M√≥vil", level: 80, techs: ["Flutter", "Kotlin", "Desarrollo Multiplataforma"], color: "from-green-500 to-emerald-500" },
                gamedev: { name: "Game Development", level: 82, techs: ["Unity", "C#", "Ambientaci√≥n 3D"], color: "from-purple-500 to-pink-500" },
                data: { name: "Data & IA", level: 75, techs: ["Pandas", "Power BI", "D3", "IA Generativa", "NLP", "LLMs"], color: "from-yellow-500 to-orange-500" },
                database: { name: "Bases de Datos", level: 83, techs: ["MySQL", "SQL"], color: "from-indigo-500 to-purple-500" }
            },
            
            projects: [
                { name: "CRM Empresarial Full Stack", description: "Sistema completo de gesti√≥n empresarial", tech: ["Angular 20", "Spring Boot", "Java 21"], status: "En desarrollo", impact: "Alta" },
                { name: "Videojuego en Unity", description: "Desarrollo de interacci√≥n digital 3D", tech: ["Unity", "C#", "3D"], status: "Completado", impact: "Media" },
                { name: "Gestor RRHH", description: "Sistema de gesti√≥n de recursos humanos", tech: ["Python", "Backend"], status: "Completado", impact: "Alta" },
                { name: "Escalera Social", description: "Plataforma social interactiva", tech: ["Svelte", "Express"], status: "En desarrollo", impact: "Media" }
            ],
            
            certifications: [
                { name: "Agentblazer Champion", issuer: "Salesforce Trailhead" },
                { name: "Innovator Badge", issuer: "Salesforce Trailhead" },
                { name: "Legend Status", issuer: "Salesforce Trailhead" },
                { name: "Certificado B2 Ingl√©s", issuer: "Oficial" }
            ],
            
            softSkills: [
                { name: "Liderazgo", level: 95 },
                { name: "Gesti√≥n de desacuerdos", level: 88 },
                { name: "Capacidad Anal√≠tica", level: 90 },
                { name: "Adaptabilidad", level: 92 },
                { name: "Perseverancia", level: 95 },
                { name: "Proactividad", level: 93 }
            ],
            
            languages: [
                { name: "Espa√±ol", level: "Nativo", percentage: 100 },
                { name: "Ingl√©s", level: "B2 Certificado", percentage: 75 }
            ]
        };

        let currentView = 'landing';
        let aiScore = 0;
        let isAnalyzing = false;
        let showModal = false;
        let showQRModal = false;
        let analyzedData = null;
        let isProcessingCV = false;
        let uploadedFileName = '';
        let apiKey = localStorage.getItem('anthropic_api_key') || '';

        async function analyzeWithAI(cvText) {
            try {
                const apiUrl = window.location.protocol === 'file:' ? 'http://localhost:3001/api/analyze' : '/api/analyze-cv';
                const response = await fetch(apiUrl, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        cvText: cvText
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || `Error ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();
                return data;
            } catch (error) {
                console.error("Error en an√°lisis IA:", error);
                alert(`Error en el an√°lisis IA: ${error.message}`);
                return null;
            }
        }

        function renderLanding() {
            return `
                <div class="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 overflow-hidden relative">
                    <div class="absolute inset-0 pointer-events-none">
                        <div class="absolute w-96 h-96 bg-purple-500 rounded-full blur-3xl opacity-20 -top-48 -left-48 animate-pulse-slow"></div>
                        <div class="absolute w-96 h-96 bg-blue-500 rounded-full blur-3xl opacity-20 -bottom-48 -right-48 animate-pulse-slow"></div>
                    </div>

                    <div class="relative container mx-auto px-4 py-12">
                        <div class="text-center mb-16 animate-fade-in">
                            <div class="flex justify-center mb-6">
                                <div class="relative">
                                    <div class="absolute inset-0 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full blur-xl opacity-50 animate-pulse"></div>
                                    <div class="relative bg-gradient-to-r from-purple-600 to-blue-600 p-6 rounded-full">
                                        <i class="fas fa-bolt text-5xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <h1 class="text-6xl md:text-7xl font-black mb-4 bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400 text-transparent bg-clip-text">
                                AilizaCV
                            </h1>
                            <p class="text-2xl md:text-3xl font-light text-gray-300 mb-8">
                                Del CV al Contrato en <span class="font-bold text-purple-400">30 segundos</span>
                            </p>
                            
                            <div class="max-w-3xl mx-auto bg-white/10 backdrop-blur-lg rounded-2xl p-8 border border-white/20 mb-8">
                                <h2 class="text-4xl font-bold mb-4">${nacorData.name}</h2>
                                <p class="text-xl text-purple-300 mb-2">${nacorData.role}</p>
                                <p class="text-gray-300 leading-relaxed">${nacorData.tagline}</p>
                                
                                <div class="flex flex-wrap justify-center gap-4 mt-6">
                                    <div class="flex items-center gap-2 bg-white/5 px-4 py-2 rounded-full">
                                        <i class="fas fa-map-marker-alt text-purple-400"></i>
                                        <span>${nacorData.location}</span>
                                    </div>
                                    <div class="flex items-center gap-2 bg-white/5 px-4 py-2 rounded-full">
                                        <i class="fas fa-envelope text-blue-400"></i>
                                        <span class="text-sm">${nacorData.email}</span>
                                    </div>
                                    <div class="flex items-center gap-2 bg-white/5 px-4 py-2 rounded-full">
                                        <i class="fas fa-phone text-green-400"></i>
                                        <span>${nacorData.phone}</span>
                                    </div>
                                </div>
                            </div>

                            <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                                <button onclick="startAnalysis()" class="group relative inline-flex items-center gap-3 bg-gradient-to-r from-purple-600 to-blue-600 px-12 py-5 rounded-full text-xl font-bold hover:scale-105 transition-all shadow-2xl hover:shadow-purple-500/50">
                                    <i class="fas fa-brain"></i>
                                    <span>Analizar Perfil Demo</span>
                                    <i class="fas fa-sparkles animate-pulse"></i>
                                </button>

                                <button onclick="showUploadModal()" class="group relative inline-flex items-center gap-3 bg-gradient-to-r from-emerald-600 to-teal-600 px-12 py-5 rounded-full text-xl font-bold hover:scale-105 transition-all shadow-2xl hover:shadow-emerald-500/50">
                                    <i class="fas fa-file-upload"></i>
                                    <span>Subir tu CV</span>
                                    <i class="fas fa-rocket animate-pulse"></i>
                                </button>

                                <button onclick="openQRModal()" class="group relative inline-flex items-center gap-3 bg-gradient-to-r from-orange-600 to-red-600 px-12 py-5 rounded-full text-xl font-bold hover:scale-105 transition-all shadow-2xl hover:shadow-orange-500/50">
                                    <i class="fas fa-qrcode"></i>
                                    <span>CV del Creador</span>
                                    <i class="fas fa-external-link-alt animate-pulse"></i>
                                </button>
                            </div>

                            <p class="mt-6 text-sm text-gray-400">
                                <i class="fas fa-bolt text-purple-400"></i> An√°lisis instant√°neo con IA ‚Ä¢ 
                                <i class="fas fa-bullseye text-blue-400"></i> Cualquier profesi√≥n ‚Ä¢ 
                                <i class="fas fa-chart-line text-green-400"></i> Portfolio interactivo ‚Ä¢ 
                                <i class="fas fa-file-pdf text-red-400"></i> PDF, TXT, DOC
                            </p>
                        </div>

                        <div class="grid md:grid-cols-4 gap-6 max-w-5xl mx-auto mb-16">
                            ${[
                                { icon: "fa-code", label: "Lenguajes", value: "10+", color: "purple" },
                                { icon: "fa-project-diagram", label: "Proyectos", value: "4+", color: "blue" },
                                { icon: "fa-award", label: "Certificaciones", value: "4", color: "pink" },
                                { icon: "fa-layer-group", label: "Tech Stack", value: "Full", color: "cyan" }
                            ].map(stat => `
                                <div class="bg-white/5 backdrop-blur-lg rounded-xl p-6 border border-white/10 text-center hover:bg-white/10 transition-all">
                                    <i class="fas ${stat.icon} text-4xl text-${stat.color}-400 mb-3"></i>
                                    <div class="text-3xl font-bold mb-1">${stat.value}</div>
                                    <div class="text-gray-400 text-sm">${stat.label}</div>
                                </div>
                            `).join('')}
                        </div>

                        <div class="max-w-6xl mx-auto">
                            <h3 class="text-3xl font-bold text-center mb-8">Stack Tecnol√≥gico</h3>
                            <div class="grid md:grid-cols-3 gap-4">
                                ${Object.values(nacorData.skills).map(skill => `
                                    <div class="bg-white/5 backdrop-blur-lg rounded-lg p-5 border border-white/10 hover:border-purple-500/50 transition-all">
                                        <div class="flex justify-between items-center mb-3">
                                            <span class="font-semibold">${skill.name}</span>
                                            <span class="text-purple-400 font-bold">${skill.level}%</span>
                                        </div>
                                        <div class="h-2 bg-white/10 rounded-full overflow-hidden mb-3">
                                            <div class="h-full bg-gradient-to-r ${skill.color} rounded-full" style="width: ${skill.level}%"></div>
                                        </div>
                                        <div class="flex flex-wrap gap-1">
                                            ${skill.techs.slice(0, 3).map(tech => `
                                                <span class="text-xs bg-white/10 px-2 py-1 rounded-full">${tech}</span>
                                            `).join('')}
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderProfile() {
            const data = analyzedData || nacorData;
            const isCustomCV = analyzedData !== null;
            
            return `
                <div class="min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 animate-fade-in">
                    <div class="container mx-auto px-4 py-8">
                        <div class="flex justify-between items-center mb-8 flex-wrap gap-4">
                            <button onclick="goBack()" class="text-gray-400 hover:text-white transition-colors flex items-center gap-2">
                                <i class="fas fa-arrow-left"></i> Volver
                            </button>
                            <div class="flex gap-3 flex-wrap">
                                <button onclick="showUploadModal()" class="flex items-center gap-2 bg-emerald-600 px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors">
                                    <i class="fas fa-file-upload"></i>
                                    <span>${isCustomCV ? 'Subir otro CV' : 'Subir tu CV'}</span>
                                </button>
                                <button class="flex items-center gap-2 bg-blue-600 px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                    <i class="fas fa-share-alt"></i>
                                    <span>Compartir</span>
                                </button>
                            </div>
                        </div>

                        ${isAnalyzing ? `
                            <div class="bg-gradient-to-r from-purple-900/50 to-blue-900/50 backdrop-blur-lg rounded-2xl p-12 mb-8 border border-purple-500/30 text-center">
                                <div class="icon-circle bg-purple-600 mx-auto mb-6">
                                    <i class="fas fa-brain text-3xl animate-pulse"></i>
                                </div>
                                <h3 class="text-2xl font-bold mb-4">Analizando perfil con IA...</h3>
                                <div class="flex justify-center gap-2 mb-6">
                                    <div class="w-3 h-3 bg-purple-500 rounded-full animate-bounce"></div>
                                    <div class="w-3 h-3 bg-blue-500 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                                    <div class="w-3 h-3 bg-pink-500 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                                </div>
                                <div class="space-y-2 text-gray-400 text-sm">
                                    <p class="animate-pulse"><i class="fas fa-check text-green-400"></i> Extrayendo informaci√≥n del CV...</p>
                                    <p class="animate-pulse" style="animation-delay: 0.5s"><i class="fas fa-check text-green-400"></i> Evaluando habilidades...</p>
                                    <p class="animate-pulse" style="animation-delay: 1s"><i class="fas fa-check text-green-400"></i> Calculando compatibilidad...</p>
                                    <p class="animate-pulse" style="animation-delay: 1.5s"><i class="fas fa-check text-green-400"></i> Generando recomendaciones...</p>
                                </div>
                            </div>
                        ` : `
                            <div class="mb-8 animate-fade-in">
                                <div class="bg-gradient-to-r from-purple-900/50 to-blue-900/50 backdrop-blur-lg rounded-2xl p-8 border border-purple-500/30">
                                    <div class="flex items-center justify-between mb-6 flex-wrap gap-4">
                                        <div class="flex items-center gap-4">
                                            <div class="icon-circle bg-purple-600 shadow-lg shadow-purple-500/30">
                                                <i class="fas fa-brain text-2xl"></i>
                                            </div>
                                            <div>
                                                <h3 class="text-2xl font-bold">An√°lisis IA Completo</h3>
                                                <p class="text-gray-400">Perfil: ${data.name}</p>
                                            </div>
                                        </div>
                                        <div class="text-center">
                                            <div class="text-6xl font-black text-purple-400 mb-2 drop-shadow-lg">${aiScore}</div>
                                            <div class="text-sm text-gray-400">Puntuaci√≥n Global</div>
                                        </div>
                                    </div>

                                    <div class="grid md:grid-cols-4 gap-4 mb-6">
                                        ${[
                                            { label: "Ajuste T√©cnico", value: data.aiAnalysis?.technicalFit || 93, icon: "fa-cogs" },
                                            { label: "Nivel Experiencia", value: data.aiAnalysis?.experienceLevel || 90, icon: "fa-star" },
                                            { label: "Agilidad Aprendizaje", value: data.aiAnalysis?.learningAgility || 94, icon: "fa-chart-line" },
                                            { label: "Versatilidad", value: data.aiAnalysis?.versatility || 89, icon: "fa-bullseye" }
                                        ].map(metric => `
                                            <div class="bg-white/5 rounded-lg p-4 text-center hover:bg-white/10 transition-colors">
                                                <i class="fas ${metric.icon} text-3xl text-purple-400 mb-2"></i>
                                                <div class="text-2xl font-bold mb-1">${metric.value}</div>
                                                <div class="text-xs text-gray-400">${metric.label}</div>
                                            </div>
                                        `).join('')}
                                    </div>

                                    <div class="grid md:grid-cols-2 gap-6 mb-6">
                                        <div class="bg-white/5 rounded-lg p-6">
                                            <h4 class="font-bold text-lg mb-4 flex items-center gap-2">
                                                <i class="fas fa-lightbulb text-yellow-400"></i> Insights Clave
                                            </h4>
                                            <div class="space-y-2 text-sm">
                                                ${(data.aiAnalysis?.keyInsights || [
                                                    "Perfil Full Stack excepcional con dominio de tecnolog√≠as modernas",
                                                    "Experiencia pr√°ctica en m√∫ltiples frameworks",
                                                    "Portfolio diversificado con proyectos reales",
                                                    "Formaci√≥n activa en √°reas emergentes",
                                                    "Excelencia acad√©mica demostrada"
                                                ]).map((insight, idx) => `
                                                    <div class="flex items-start gap-3 animate-slide-in" style="animation-delay: ${idx * 0.1}s">
                                                        <i class="fas fa-check-circle text-green-400 mt-1"></i>
                                                        <span class="text-gray-300">${insight}</span>
                                                    </div>
                                                `).join('')}
                                            </div>
                                        </div>

                                        <div class="bg-white/5 rounded-lg p-6">
                                            <h4 class="font-bold text-lg mb-4 flex items-center gap-2">
                                                <i class="fas fa-trophy text-yellow-400"></i> Fortalezas Principales
                                            </h4>
                                            <div class="flex flex-wrap gap-2">
                                                ${(data.aiAnalysis?.strengths || ["Stack Completo", "IA & Data", "Liderazgo"]).map(strength => `
                                                    <span class="bg-gradient-to-r from-purple-600/30 to-blue-600/30 border border-purple-500/50 px-3 py-2 rounded-lg text-sm font-medium">
                                                        ${strength}
                                                    </span>
                                                `).join('')}
                                            </div>

                                            ${data.aiAnalysis?.idealRoles ? `
                                                <h4 class="font-bold text-lg mt-6 mb-3 flex items-center gap-2">
                                                    <i class="fas fa-briefcase text-blue-400"></i> Roles Ideales
                                                </h4>
                                                <div class="space-y-2">
                                                    ${data.aiAnalysis.idealRoles.map(role => `
                                                        <div class="flex items-center gap-2 text-sm text-gray-300">
                                                            <i class="fas fa-arrow-right text-purple-400"></i>
                                                            <span>${role}</span>
                                                        </div>
                                                    `).join('')}
                                                </div>
                                            ` : ''}
                                        </div>
                                    </div>

                                    <div class="bg-gradient-to-r from-purple-600/20 to-blue-600/20 rounded-lg p-6 border-l-4 border-purple-500">
                                        <h4 class="font-bold text-lg mb-2 flex items-center gap-2">
                                            <i class="fas fa-gem text-purple-400"></i> Recomendaci√≥n Final
                                        </h4>
                                        <p class="text-gray-300 leading-relaxed">${data.aiAnalysis?.recommendation || "Candidato TOP TIER con capacidades excepcionales. Destacable versatilidad t√©cnica y mentalidad de crecimiento continuo. Ideal para empresas que buscan talento escalable."}</p>
                                    </div>
                                </div>
                            </div>
                        `}

                        <div class="grid lg:grid-cols-3 gap-8 ${isAnalyzing ? 'opacity-50 blur-sm' : ''}">
                            <div class="lg:col-span-2 space-y-6">
                                ${(data.experience || data.projects) ? `
                                    <div class="bg-white/5 backdrop-blur-lg rounded-xl p-6 border border-white/10">
                                        <h3 class="text-2xl font-bold mb-6 flex items-center gap-2">
                                            <i class="fas fa-briefcase text-purple-400"></i> 
                                            ${data.experience ? 'Experiencia Profesional' : 'Proyectos Destacados'}
                                        </h3>
                                        <div class="space-y-4">
                                            ${((data.experience || data.projects) || []).filter(item => item.name || item.title).map(item => `
                                                <div class="bg-white/5 rounded-lg p-5 border border-white/10 hover:border-purple-500/50 transition-all group">
                                                    <div class="flex items-start justify-between mb-3 flex-wrap gap-2">
                                                        <div class="flex-1">
                                                            <h4 class="font-bold text-lg group-hover:text-purple-400 transition-colors">
                                                                ${item.name || item.title}
                                                            </h4>
                                                            <p class="text-sm text-gray-400">${item.description || item.company || ''}</p>
                                                            ${item.period ? `<p class="text-xs text-gray-500 mt-1"><i class="far fa-calendar"></i> ${item.period}</p>` : ''}
                                                        </div>
                                                        ${item.status ? `
                                                            <span class="text-xs px-3 py-1 rounded-full whitespace-nowrap ${item.status.includes('desarrollo') || item.status.includes('En curso') ? 'bg-yellow-500/20 text-yellow-400' : 'bg-green-500/20 text-green-400'}">
                                                                ${item.status}
                                                            </span>
                                                        ` : ''}
                                                    </div>
                                                    ${item.tech ? `
                                                        <div class="flex flex-wrap gap-2">
                                                            ${item.tech.map(tech => `
                                                                <span class="text-xs bg-blue-500/20 text-blue-300 px-3 py-1 rounded-full">
                                                                    ${tech}
                                                                </span>
                                                            `).join('')}
                                                        </div>
                                                    ` : ''}
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                ` : ''}

                                <div class="bg-white/5 backdrop-blur-lg rounded-xl p-6 border border-white/10">
                                    <h3 class="text-2xl font-bold mb-6 flex items-center gap-2">
                                        <i class="fas fa-tools text-blue-400"></i> Habilidades
                                    </h3>
                                    <div class="space-y-4">
                                        ${Object.values(data.skills).map(skill => `
                                            <div class="animate-slide-in">
                                                <div class="flex justify-between items-center mb-2">
                                                    <span class="font-semibold">${skill.name}</span>
                                                    <span class="text-purple-400 font-bold">${skill.level}%</span>
                                                </div>
                                                <div class="h-3 bg-white/10 rounded-full overflow-hidden mb-2">
                                                    <div class="h-full bg-gradient-to-r ${skill.color} rounded-full transition-all duration-1000" style="width: ${skill.level}%"></div>
                                                </div>
                                                <div class="flex flex-wrap gap-2">
                                                    ${skill.techs.map(tech => `
                                                        <span class="text-xs bg-white/10 px-3 py-1 rounded-full hover:bg-white/20 transition-colors">
                                                            ${tech}
                                                        </span>
                                                    `).join('')}
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>

                                ${data.education && data.education.length > 0 ? `
                                    <div class="bg-white/5 backdrop-blur-lg rounded-xl p-6 border border-white/10">
                                        <h3 class="text-2xl font-bold mb-6 flex items-center gap-2">
                                            <i class="fas fa-graduation-cap text-green-400"></i> Formaci√≥n Acad√©mica
                                        </h3>
                                        <div class="space-y-4">
                                            ${data.education.map(edu => `
                                                <div class="bg-white/5 rounded-lg p-4 border-l-4 border-green-500">
                                                    <h4 class="font-bold text-lg mb-1">${edu.degree}</h4>
                                                    <p class="text-gray-400 text-sm mb-1">${edu.institution}</p>
                                                    <div class="flex items-center gap-3 text-xs text-gray-500">
                                                        <span><i class="far fa-calendar"></i> ${edu.period}</span>
                                                        <span class="px-2 py-1 rounded-full ${edu.status === 'Completado' ? 'bg-green-500/20 text-green-400' : 'bg-blue-500/20 text-blue-400'}">
                                                            ${edu.status}
                                                        </span>
                                                    </div>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                ` : ''}
                            </div>

                            <div class="space-y-6">
                                <div class="bg-white/5 backdrop-blur-lg rounded-xl p-6 border border-white/10 sticky top-4">
                                    <h3 class="text-xl font-bold mb-6 flex items-center gap-2">
                                        <i class="fas fa-user text-purple-400"></i> Informaci√≥n Personal
                                    </h3>
                                    
                                    <div class="space-y-4 text-sm">
                                        <div class="flex items-center gap-3 p-3 bg-white/5 rounded-lg">
                                            <i class="fas fa-map-marker-alt text-purple-400 w-5"></i>
                                            <span>${data.location}</span>
                                        </div>
                                        ${data.email ? `
                                            <div class="flex items-center gap-3 p-3 bg-white/5 rounded-lg break-all">
                                                <i class="fas fa-envelope text-blue-400 w-5"></i>
                                                <span>${data.email}</span>
                                            </div>
                                        ` : ''}
                                        ${data.phone ? `
                                            <div class="flex items-center gap-3 p-3 bg-white/5 rounded-lg">
                                                <i class="fas fa-phone text-green-400 w-5"></i>
                                                <span>${data.phone}</span>
                                            </div>
                                        ` : ''}
                                        ${data.linkedin ? `
                                            <a href="https://${data.linkedin}" target="_blank" class="flex items-center gap-3 p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-colors">
                                                <i class="fab fa-linkedin text-blue-500 w-5"></i>
                                                <span class="text-blue-400 hover:underline">LinkedIn</span>
                                            </a>
                                        ` : ''}
                                        ${data.github ? `
                                            <a href="https://${data.github}" target="_blank" class="flex items-center gap-3 p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-colors">
                                                <i class="fab fa-github text-gray-300 w-5"></i>
                                                <span class="text-gray-300 hover:underline">GitHub</span>
                                            </a>
                                        ` : ''}
                                    </div>

                                    ${data.languages && data.languages.length > 0 ? `
                                        <div class="mt-6 pt-6 border-t border-white/10">
                                            <h4 class="font-bold mb-4 flex items-center gap-2">
                                                <i class="fas fa-language text-cyan-400"></i> Idiomas
                                            </h4>
                                            <div class="space-y-3">
                                                ${data.languages.map(lang => `
                                                    <div>
                                                        <div class="flex justify-between mb-2 text-sm">
                                                            <span class="font-medium">${lang.name}</span>
                                                            <span class="text-gray-400">${lang.level}</span>
                                                        </div>
                                                        <div class="h-2 bg-white/10 rounded-full overflow-hidden">
                                                            <div class="h-full bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full" style="width: ${lang.percentage}%"></div>
                                                        </div>
                                                    </div>
                                                `).join('')}
                                            </div>
                                        </div>
                                    ` : ''}

                                    ${data.softSkills && data.softSkills.length > 0 ? `
                                        <div class="mt-6 pt-6 border-t border-white/10">
                                            <h4 class="font-bold mb-4 flex items-center gap-2">
                                                <i class="fas fa-heart text-pink-400"></i> Habilidades Blandas
                                            </h4>
                                            <div class="space-y-3">
                                                ${data.softSkills.map(skill => `
                                                    <div>
                                                        <div class="flex justify-between mb-2 text-sm">
                                                            <span>${skill.name}</span>
                                                            <span class="text-purple-400 font-bold">${skill.level}%</span>
                                                        </div>
                                                        <div class="h-2 bg-white/10 rounded-full overflow-hidden">
                                                            <div class="h-full bg-gradient-to-r from-pink-500 to-purple-500 rounded-full" style="width: ${skill.level}%"></div>
                                                        </div>
                                                    </div>
                                                `).join('')}
                                            </div>
                                        </div>
                                    ` : ''}

                                    ${data.certifications && data.certifications.length > 0 ? `
                                        <div class="mt-6 pt-6 border-t border-white/10">
                                            <h4 class="font-bold mb-4 flex items-center gap-2">
                                                <i class="fas fa-certificate text-yellow-400"></i> Certificaciones
                                            </h4>
                                            <div class="space-y-2">
                                                ${data.certifications.map(cert => `
                                                    <div class="bg-white/5 rounded-lg p-3 text-sm">
                                                        <div class="font-medium mb-1">${cert.name}</div>
                                                        <div class="text-xs text-gray-400">${cert.issuer}</div>
                                                    </div>
                                                `).join('')}
                                            </div>
                                        </div>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderUploadModal() {
            if (!showModal) return '';

            return `
                <div class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in" role="dialog" aria-labelledby="upload-modal-title" aria-modal="true">
                    <div class="bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl max-w-2xl w-full border border-purple-500/30 shadow-2xl">
                        <div class="p-6 border-b border-white/10 flex justify-between items-center">
                            <h3 id="upload-modal-title" class="text-2xl font-bold flex items-center gap-3">
                                <i class="fas fa-cloud-upload-alt text-purple-400"></i>
                                Sube tu CV
                            </h3>
                            <button onclick="closeModal()" class="text-gray-400 hover:text-white transition-colors">
                                <i class="fas fa-times text-2xl"></i>
                            </button>
                        </div>

                        <div class="p-8">
                            ${isProcessingCV ? `
                                <div class="text-center py-12">
                                    <div class="icon-circle bg-purple-600 mx-auto mb-6 animate-pulse">
                                        <i class="fas fa-cog text-3xl animate-spin"></i>
                                    </div>
                                    <h4 class="text-xl font-bold mb-4">Procesando tu CV</h4>
                                    <p class="text-gray-400 mb-6">Analizando con inteligencia artificial...</p>
                                    <div class="flex justify-center gap-2">
                                        <div class="w-3 h-3 bg-purple-500 rounded-full animate-bounce"></div>
                                        <div class="w-3 h-3 bg-blue-500 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                                        <div class="w-3 h-3 bg-pink-500 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                                    </div>
                                </div>
                            ` : `
                                <div class="border-2 border-dashed border-purple-500/50 rounded-xl p-12 text-center hover:border-purple-500 transition-colors bg-white/5">
                                    <input type="file" id="cvFile" accept=".pdf,.txt" class="hidden" onchange="handleFileUpload(event)">
                                    <label for="cvFile" class="cursor-pointer">
                                        <div class="icon-circle bg-gradient-to-r from-purple-600 to-blue-600 mx-auto mb-6 hover:scale-110 transition-transform">
                                            <i class="fas fa-file-upload text-3xl"></i>
                                        </div>
                                        <h4 class="text-xl font-bold mb-2">
                                            ${uploadedFileName || 'Selecciona tu CV'}
                                        </h4>
                                        <p class="text-gray-400 mb-6">
                                            PDF o TXT
                                        </p>
                                        <div class="inline-block bg-gradient-to-r from-purple-600 to-blue-600 px-8 py-3 rounded-lg font-semibold hover:scale-105 transition-transform">
                                            Seleccionar archivo
                                        </div>
                                    </label>
                                </div>

                                <div class="mt-6 space-y-3">
                                    <div class="flex items-start gap-3 text-sm text-gray-400">
                                        <i class="fas fa-check text-green-400 mt-1"></i>
                                        <span>An√°lisis con IA 100% gratuita</span>
                                    </div>
                                    <div class="flex items-start gap-3 text-sm text-gray-400">
                                        <i class="fas fa-check text-green-400 mt-1"></i>
                                        <span>Compatible con cualquier profesi√≥n</span>
                                    </div>
                                    <div class="flex items-start gap-3 text-sm text-gray-400">
                                        <i class="fas fa-check text-green-400 mt-1"></i>
                                        <span>Recomendaciones personalizadas</span>
                                    </div>
                                    <div class="flex items-start gap-3 text-sm text-gray-400">
                                        <i class="fas fa-dollar-sign text-green-400 mt-1"></i>
                                        <span>Totalmente gratis - Sin costos ocultos</span>
                                    </div>
                                </div>

                                ${uploadedFileName ? `
                                    <button onclick="processUploadedCV()" class="w-full mt-6 bg-gradient-to-r from-emerald-600 to-teal-600 px-6 py-4 rounded-lg font-bold hover:scale-105 transition-all flex items-center justify-center gap-3">
                                        <i class="fas fa-brain"></i>
                                        <span>Analizar con IA</span>
                                        <i class="fas fa-arrow-right"></i>
                                    </button>
                                ` : ''}
                            `}
                        </div>
                    </div>
                </div>
            `;
        }

        function renderQRModal() {
            if (!showQRModal) return '';

            return `
                <div class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in" role="dialog" aria-labelledby="qr-modal-title" aria-modal="true">
                    <div class="bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl max-w-md w-full border border-orange-500/30 shadow-2xl">
                        <div class="p-6 border-b border-white/10 flex justify-between items-center">
                            <h3 id="qr-modal-title" class="text-2xl font-bold flex items-center gap-3">
                                <i class="fas fa-qrcode text-orange-400"></i>
                                CV del Creador
                            </h3>
                            <button onclick="closeQRModal()" class="text-gray-400 hover:text-white transition-colors">
                                <i class="fas fa-times text-2xl"></i>
                            </button>
                        </div>

                        <div class="p-8 text-center">
                            <p class="text-lg text-gray-300 mb-6">
                                Este es el QR que te llevar√° al CV del creador
                            </p>
                            <div class="flex justify-center">
                                <img src="CV.png" alt="QR Code del CV del creador" class="max-w-full h-auto rounded-lg shadow-lg border border-white/20">
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        async function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            uploadedFileName = file.name;
            window.uploadedFile = file;
            render();
        }

        async function processUploadedCV() {
            if (!window.uploadedFile) return;

            isProcessingCV = true;
            render();

            try {
                const file = window.uploadedFile;
                let cvText = '';

                if (file.type === 'application/pdf') {
                    const arrayBuffer = await file.arrayBuffer();
                    const uint8Array = new Uint8Array(arrayBuffer);
                    const pdf = await pdfjsLib.getDocument(uint8Array).promise;
                    
                    let fullText = '';
                    for (let i = 1; i <= pdf.numPages; i++) {
                        const page = await pdf.getPage(i);
                        const textContent = await page.getTextContent();
                        const pageText = textContent.items.map(item => item.str).join(' ');
                        fullText += pageText + '\n';
                    }
                    cvText = fullText;
                } else {
                    cvText = await file.text();
                }

                const analysis = await analyzeWithAI(cvText);
                
                if (analysis) {
                    analyzedData = analysis;
                    aiScore = analysis.overallScore || 85;
                    isProcessingCV = false;
                    showModal = false;
                    uploadedFileName = '';
                    currentView = 'profile';
                    isAnalyzing = true;
                    
                    render();
                    
                    setTimeout(() => {
                        isAnalyzing = false;
                        render();
                    }, 3000);
                } else {
                    throw new Error('No se pudo analizar el CV');
                }
            } catch (error) {
                console.error('Error procesando CV:', error);
                alert('Hubo un error al procesar tu CV. Por favor, intenta de nuevo.');
                isProcessingCV = false;
                render();
            }
        }

        function startAnalysis() {
            currentView = 'profile';
            isAnalyzing = true;
            aiScore = 0;
            analyzedData = null;
            render();

            let score = 0;
            const interval = setInterval(() => {
                score += Math.floor(Math.random() * 5) + 1;
                if (score >= 92) {
                    score = 92;
                    clearInterval(interval);
                    setTimeout(() => {
                        isAnalyzing = false;
                        aiScore = 92;
                        render();
                    }, 500);
                }
                aiScore = score;
                render();
            }, 50);
        }

        function showUploadModal() {
            showModal = true;
            uploadedFileName = '';
            render();
        }

        function closeModal() {
            showModal = false;
            uploadedFileName = '';
            isProcessingCV = false;
            render();
        }

        function openQRModal() {
            showQRModal = true;
            render();
        }

        function closeQRModal() {
            showQRModal = false;
            render();
        }



        function goBack() {
            currentView = 'landing';
            isAnalyzing = false;
            analyzedData = null;
            aiScore = 0;
            render();
        }

        function renderApiKeyModal() {
            if (!showApiKeyModal) return '';

            return `
                <div class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in">
                    <div class="bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl max-w-md w-full border border-purple-500/30 shadow-2xl">
                        <div class="p-6 border-b border-white/10 flex justify-between items-center">
                            <h3 class="text-xl font-bold flex items-center gap-3">
                                <i class="fas fa-key text-purple-400"></i>
                                Configurar API Key
                            </h3>
                            <button onclick="closeApiKeyModal()" class="text-gray-400 hover:text-white transition-colors">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>

                        <div class="p-6">
                            <p class="text-gray-400 text-sm mb-4">
                                Necesitas una API Key de Anthropic para usar el an√°lisis con IA.
                                <a href="https://console.anthropic.com/" target="_blank" class="text-purple-400 hover:underline">Obt√©n tu API Key aqu√≠</a>
                            </p>

                            <div class="mb-4">
                                <label class="block text-sm font-medium mb-2">API Key de Anthropic</label>
                                <input
                                    type="password"
                                    id="apiKeyInput"
                                    value="${apiKey}"
                                    placeholder="sk-ant-api03-..."
                                    class="w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none"
                                >
                            </div>

                            <div class="flex gap-3">
                                <button onclick="saveApiKey()" class="flex-1 bg-gradient-to-r from-purple-600 to-blue-600 px-4 py-3 rounded-lg font-semibold hover:scale-105 transition-all">
                                    Guardar
                                </button>
                                <button onclick="closeApiKeyModal()" class="flex-1 bg-gray-600 px-4 py-3 rounded-lg font-semibold hover:bg-gray-700 transition-colors">
                                    Cancelar
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function render() {
            const app = document.getElementById('app');
            let html = '';

            if (currentView === 'landing') {
                html = renderLanding();
            } else if (currentView === 'profile') {
                html = renderProfile();
            }

            html += renderUploadModal();
            html += renderQRModal();

            app.innerHTML = html;
        }

        render();
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js';
    </script>
</body>
</html>